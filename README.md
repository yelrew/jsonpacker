# JSON Packer

**A JSON binary packer**.

## Synopsis

    Usage: jsonpackerc [OPTION...] <JSON file>
    JSON Packer -- A program to encode JSON key-valued objects in binary format.
    
      -d, --one-dict             Use a single dicionary for all records (optional)
      -e, --encoder=encoder      Changes default file output name (optional)
      -n, --no-file-output       Do not write binary files
      -o, --output=outfile       Changes default file output name (optional)
    
     Output formatting
      -b, --print-encondings     Prints the encondings' byte arrays
      -r, --print-records        Prints records in a compact JSON style
      -R, --print-full-records   Prints records in a full JSON style
    
      -?, --help                 Give this help list
          --usage                Give a short usage message
      -V, --version              Print program version



_JSON packer_ is a small utility that reads sequences of JSON records and encode them in  binary format.
_JSON packer_ makes uses of [cJSON](https://github.com/DaveGamble/cJSON) to parse the objects.

Each JSON key-value record is split into two new pairs: an `encValue` pair,
whith the keys replaced by "numeric" pre-assigned values; and a `keyEnc`
pair, with a mapping between the original keys and the new encoded keys.
The encoded values and keys can be optionally written to a file stream.

By default, _JSON packer_ adopts the
[ASN.1](https://www.itu.int/en/ITU-T/asn1/Pages/introduction.aspx) _DER_ format to encode the records.
New encoder types are expected to be released soon.

## Basic usage

In the general use case, _JSON packer_ reads a _JSON_ file containing a series of records
(separated by newlines) and generates two binary files in ASN.1 DER encoding:

        ./jsonp <json-records-file> -b

The files are named after the original input file, and written in the same folder. 


## Building

The program's can be compiled using _CMake_:

    mkdir build
    cd build
    cmake ..
    cmake --build .
 

## Documentation

The Doxygen documentation can be optionally generated by:

    cmake --build . --target doc
    
## Tests

Unity tests are compiled by:

    cmake --build . --target test
    


